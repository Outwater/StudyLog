# 섹션1. 변수 다루기

## 1. var를 지양하자

**1. var가 아닌 const를 사용해야 하는 이유**

- let과 const 는 ES2015에 등장

- var는 함수스코프 ,let & const 는 블록 스코프를 가진다.

  - 블록스코프는 TDZ를 유의해야한다.

- var(함수스코프) 위험한 요소
  - 변수명이 같지만 다른 값이 할당 된 경우에도 error를 발생시키지 않는다.
    - 가장 마지막에 할당한 값이 리턴
  - 선언 이전에 변수를 호출해도 error를 발생시키지 않는다.
    - undefined 리턴
  - 재할당, 재선언의 제약이 없이 계속 가능하다.
- var(함수스코프) 위험한 이유

  - 1000줄, 10000줄등 코드가 방대해진다면, 모든 변수를 통제할 수 없기 때문에 이전에 선언된 변수를 예기치 않게 재할당, 재선언하여 예기치않은 오류를 발생시킬 수 있다.

- let이 해결해 줄 수 있는 부분
  - 재선언이 불가능하기 때문에 중복된 변수를 사용할 수 없다.
- const가 해결해 줄 수 있는 부분
  - 재선언 뿐만 아니라 재할당이 불가능하기 때문에, 선언한 값이 변하지 않음을 보장할 수 있다.
  - 단, 참조타입의 자료형의 경우, 내부의 값은 변경가능하다.

### 한 줄 요약

**var는 재선언과 재할당이 가능하기 때문에 예상치 못한 오류를 발생시킬 수 있다. 따라서 let과 const를 통해 예측가능한 코드를 작성한다.**

## 2. function scope & block scope

**Function Scope와 BlockScope**

- 함수스코프는 오로지 함수를 기준으로 스코프를 구분하기 때문에, if(), for() 문 등의 block스코프 내부에서 값을 변경한다면, 전역의 값에 영향을 미치게 된다.

```js
//Function Scope by Var

var global = "전역";
if (global === "전역") {
  var global = "지역";
  console.log(global); // '지역'
}
console.log(global); // '지역'
```

```js
// Block Scope by let

let global = "전역";
if (global === "전역") {
  let global = "지역";
  console.log(global); // '지역'
}
console.log(global); // '전역'
```

**let보다 const 사용을 지향하는 이유**
let은 재할당이 가능하기 때문에, 실수로 인하여 값이 바뀔 가능성이 있다.
따라서 반드시 재할당이 필요한 변수에만 let을 사용한다.

- 재할당 금지가 값의 변경 금지를 의미하지는 않는다.
  - 객체와 배열의 경우 메소드와 프로퍼티를 통해 내부의 값들을 변경할 수 있다.

### 한 줄 요약

**BlockScope를 통해 scope의 전역오염을 막을 수 있고, 이를 위해서 let,const를 통해 변수를 선언한다.**

-

## 3. 전역 공간 사용 최소화

**전역공간이란?**
전역공간은 최상위 공간을 의미한다.

- global 혹은 window
  - 브라우저 환경의 경우 `window`
  - NodeJS 환경의 경우 `global`

### 사용하면 안되는 이유

'어디에서나 접근할 수 있으면 좋은 것 아니야?' => No!!

**1. 서로 다른 js파일에서 window.변수, 혹은 변수를 직접적으로 접근할 수 있다.**

- 예상치 못한 동작
  - 선언이 안되어 있는 데 사용이 가능한 case 발생
- 보안상 다른 파일의 정보를 접근가능하다는 점

**2. WebAPI와 중복된 변수명을 선언할 경우, 코드환경이 아닌 실행환경(브라우저)에서 error를 발생한다.**

- setTimeout 이라는 변수명을 사용할 경우, 전역공간(window)가 가지고 있는 setTimeout이 변경되어, 다른 어떤 곳에서도 setTimeout함수를 사용할 수 없게 된다.

- 코드 환경에서 error를 띄우지 않는다는 것도 치명적이다!

### 전역공간을 사용하지 않는 방법

**1. const, let을 통한 blockScope 사용**
**2. 즉시실행함수 (IIFE)**
**3. Module**
**4. Closure패턴 사용**

### 한 줄 요약

**전역공간을 사용하게 된다면, 어디에서나 접근이 가능하여 실행환경에서 예상치 못한 오류가 발생할 수 있다. 따라서 전역변수가 아닌 지역변수만을 사용하고, window,global 조작하지 않는 것, const,let, IIFE, Closure등 으로 해결할 수 있다.**

## 4. 임시변수 제거하기

## 5. 호이스팅 주의하기
