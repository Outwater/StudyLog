# 블랙커피 Vanilla JS Lv1. 문벅스 카페 메뉴 앱 만들기

## 섹션1. 공부 목표

### 강의 자료 및 링크

- [강의 자료(가이드)](https://blog.makerjun.com/blackcoffee/moonbucks-guidebook)
- [Git 저장소(요구사항 확인)](https://github.com/blackcoffee-study/moonbucks-menu)
- [데모링크](https://blackcoffee-study.github.io/moonbucks-menu/)

### 강의 목적과 사이클 소개

> **목적**

- 바닐라js를 아는 걸 넘어서 잘 사용하기 위한 `사고 훈련`
- `바닐라js`로 `상태관리가 가능`한 애플리케이션 만들기

> **사이클**

- 1단계 <br>
  에스프레소 메뉴판 만들기
- 2단계 <br>
  여러개의 메뉴판 만들기
- 3단계 <br>
  웹서버에 API 요청하기

> **강의 포커스**

- 기능구현 + 리팩토링
- 지식,개념의 획득보다 `사고하는 훈련`을 위주로 진행

## Step1 - 문벅스 카페의 에스프레소 메뉴판 만들기

### Step1 요구사항 분석

> Step1 요구사항 - `돔 조작과 이벤트 핸들링으로 메뉴 관리하기`

    1. 에스프레소 메뉴에 새로운 메뉴를 확인 버튼 또는 엔터키 입력으로 추가한다.
        - 메뉴가 추가되고 나면, input은 빈 값으로 초기화한다.
        - 사용자 입력값이 빈 값이라면 추가되지 않는다.
    2. 메뉴의 수정 버튼을 눌러 메뉴 이름 수정할 수 있다.
        - 메뉴 수정시 브라우저에서 제공하는 prompt 인터페이스를 활용한다.
    3. 메뉴 삭제 버튼을 이용하여 메뉴 삭제할 수 있다.
        - 메뉴 삭제시 브라우저에서 제공하는 confirm 인터페이스를 활용한다.
    4. 총 메뉴 갯수를 count하여 상단에 보여준다.
    5. 추가되는 메뉴의 아래 마크업은 <ul id="espresso-menu-list" class="mt-3 pl-0"></ul> 안에 삽입해야 한다.

> 메뉴의 마크업

```js
<li class="menu-list-item d-flex items-center py-2">
  <span class="w-100 pl-2 menu-name">${name}</span>
  <button
    type="button"
    class="bg-gray-50 text-gray-500 text-sm mr-1 menu-edit-button"
  >
    수정
  </button>
  <button
    type="button"
    class="bg-gray-50 text-gray-500 text-sm menu-remove-button"
  >
    삭제
  </button>
</li>
```

> step1. 요구사항 구현을 위한 전략

- 어떤 요구사항들이 있는지 체크
- 여러 요구사항 중 의존성을 체크하고 우선순위를 부여하기
- 한 가지 요구사항에 한 가지 기능만 담도록 요구사항 구체화
  - `메뉴 확인 버튼 또는 엔터키 입력으로 추가한다`를 `확인버튼`과 `엔터키 입력`으로 따로 분리 하도록 함

> 구체화된 요구사항

- Todo0. 기본 마크업 렌더링<br>
  - 주어진 기본 ul 마크업 추가한다.
- Todo1. 메뉴 추가 <br>

  - 메뉴의 이름을 입력 받고, 확인 버튼을 누르면 메뉴가 추가된다.
  - 메뉴의 이름을 입력 받고, 엔터키 입력하면 메뉴가 추가돤다.
  - 메뉴가 추가되고 나면, input은 빈 값이 된다.
  - 사용자 입력이 빈 값이라면, 메뉴는 추가되지 않는다.

  - 추가되는 메뉴의 아래 마크업은 `<ul id="espresso-menu-list" class="mt-3 pl-0"></ul>` 안에 삽입해야 한다.
  - 추가 시 변경된 메뉴 개수를 상단에 보여준다.

- Todo2. 메뉴 수정 <br>
  - 메뉴 수정 버튼을 누르면, prompt 창이 열린다.
  - prompt값으로 메뉴이름을 받고, 확인 시 해당 메뉴이름이 변경된다.
- Todo3. 메뉴 삭제 <br>
  - 메뉴 삭제 버튼을 누르면, confirm창이 열린다.
  - confirm 창 확인시, 해당 메뉴는 삭제 된다.
  - 취소 시, 해당 메뉴는 삭제되지 않는다.
  - 삭제 시 변경된 메뉴 개수를 상단에 보여준다.

> TODO 0

- Mission Repository Clone 하여 마크업 구조 확인 완료
- 구조

  ```
    Header {
      title
      Nav {
        MenuBtnList {
          name
        }
      }
    Main {
      Board ( title & 개수)
      Form (input & button)
      상세MenuList {
        name,수정,삭제
      }
    }

  ```

- Main을 3개의 컴포넌트로 분리할 수 있지 않을까 생각

> TODO 1 추가기능

- 현재 메뉴를 state로 관리
  - `state: {espressoMenuList: []}` & `menu: {id , name}`
- `setState()` 로 모든 상태를 변경하고, render함수를 같이 실행하도록 함
  - `renderList`, `renderCount`로 각 부분을 템플릿화하여 렌더링
- MenuList, MenuCount 등 컴포넌트 분리 필요

- 추가 기능
  - 'Enter' 혹은 추가버튼 클릭 시, `addMenu()`로 상태를 변경하고 이를 반영하여 렌더링되도록 한다.
- 이벤트처리
  - form태그는 버튼 클릭 시 자동으로 브라우저에 전송하므로 `e.preventDefault()`를 사용하여 막아주어야 한다.

> TODO 2,3. 수정 & 삭제기능

수정과 삭제 버튼은 모두 동적으로 추가/삭제되는 요소인 `<li>`에 존재하므로 이벤트를 동적으로 바인딩해주기 어렵다. <br>
따라서 각각의 메뉴가 아닌 상위의 ul에 미리 **이벤트위임**을 해준다. <br>

- menu생성 시 menu에 id값을 부여하고, e.target의 class가 'edit, remove'를 포함하는가 여부에 따라 이벤트 처리 함수를 실행하여준다.

  - `if(e.target.classList.contains(edit-btn){ handleEditMenu(id) }`

- 수정기능
  - `prompt('')` 브라우저 API를 통해, 수정할 menuName을 받고, id와 함께 넘겨주어 `editMemu()` 실행
  - `prompt()`의 두번째 인자는 prompt창에 보이는 default값을 의미
- 삭제기능
  - `confirm('')` 브라우저 API는 사용자 선택에 따라 true/false를 리턴한다.
  - true일 경우 id를 넘겨 `handleRemoveMenu(id)` 실행

> 강의 수강

Tip1. Utils 함수 만들기

- 반복되는 document.querySelector => $()로 유틸화
  - `const $ = (selector) => document.querySelector(selector)`
- Template 반환하는 함수 만들기

Tip2. HTML 요소를 위치에 맞게 넣어주는 브라우저 API

- `Element.insertAdjacentHTML(position, insertElement)`
- position은 총 4개 중 선택하여 입력
  ```
  <!-- beforebegin -->
  <p>
  <!-- afterbegin -->
  foo
  <!-- beforeend -->
  </p>
  <!-- afterend -->
  ```

Tip3. 수정사항 (refactor 요소)

1.  $함수로 querySelector 부분 간결하게 처리
2.  `init()` 추가하여 initState있을 때, 메뉴리스트 보여주도록 수정
3.  변수명 의미를 명확히 담도록 변경
    - state.menus -> state.espressoMenuList
    - `<li>`template -> `menuItemTemplate(espressoMenu)`로 함수화
4.  이벤트 처리로직들을 함수화하여 가독성 높이기
    - `handleAddMenu`,` handleEditMenu`,` handleRemoveMenu`

> 알게된 것

- 기본적인 state기반으로 UI를 업데이트 하도록 하는 패턴
- 이벤트위임
  - 상위요소에 이벤트를 달아주어, 동적인 자식요소의 변화에도 일일이 이벤트를 달아주지 않아도 된다.
- Brower API
  - prompt, confirm, El.insertAdjacentHTML()
  - prompt의 두번째 인자는 propt창에 입력되어 있는 default값

## 섹션3

## 섹션4

## 섹션5

## 참고

[functional Component](https://github.com/mintplo/moonbucks-menu/blob/ea0c6a60d73c72e3e1006c8f36b54888298d14f6/src/js/index.js)
